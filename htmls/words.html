<!doctype html>
<html>

<head>
	<script type="text/javascript">

		const BLOG_ID = '2455809786517018658';
		const API_KEY = 'AIzaSyCaC2KBiX526c7b214OG65G8fJXYINT3Rk';
		const API_URL = 'https://www.googleapis.com/blogger/v3/blogs/';
		const TRANSLATOR_URL = 'https://translate.googleapis.com/translate_a/single?client=gtx&sl=zh-CN&tl=en&dt=t&dt=rm&q=';

		let allWords = [];
		let currentCategory = '';
		let recognizedText = null;


		/**
		 * Reads all words from a page "all-words" file and populate a globally used words array.
		 * Add this to the cross-column section
		 */
		function parseAllWords(response) {
			console.log('start parsing character list');
			let code, item;
			let idx = 0;
			let charCount = 0;
			for (let i = 0; i < response.items.length; i++) {
				item = response.items[i];
				if (item.title == 'all-words') {
					code = item.content;
					idx = code.indexOf('[');
					if (idx > 0) {
						code = code.substring(idx);
					}
					allWords = JSON.parse(code);
					currentCategory = allWords[0].category;

					for (let n = 0; n < allWords.length; n++) {
						charCount += allWords[n].words.length;
					}
					console.log('The number of characters:' + charCount);
					return charCount;
				}
			}
		}

		/**
		 * Uses the google blogger rest service to load all the words from a page file
		 */
		function loadBloggerScript() {
			let script = document.createElement('script');
			script.type = 'text/javascript';
			script.src = API_URL + BLOG_ID + '/pages?key=' + API_KEY + '&callback=parseAllWords&ts=' + new Date().getTime();
			document.body.appendChild(script);
		}

		/**
		 * Checks the device
		 */
		function isMobile() {
			const userAgent = navigator.userAgent.toLowerCase();
			const isTouch = 'ontouchstart' in window;
			const width = window.innerWidth;

			return (/iphone|ipad|ipod/.test(userAgent) || /android/.test(userAgent) || isTouch && width <= 768 || isTouch && width > 768);
		}

		// Ensure the script loads after the DOM is ready
		document.addEventListener('DOMContentLoaded', loadBloggerScript);
	</script>
</head>

<body>
</body>

</html>